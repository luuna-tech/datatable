var DataTable=function(t){"use strict";function e(t,e){return"string"==typeof t?(e||document).querySelector(t):t||null}t=t&&t.hasOwnProperty("default")?t.default:t,e.each=(t,e)=>"string"==typeof t?Array.from((e||document).querySelectorAll(t)):t||null,e.create=(t,n)=>{let i=document.createElement(t);for(let t in n){let o=n[t];if("inside"===t)e(o).appendChild(i);else if("around"===t){let t=e(o);t.parentNode.insertBefore(i,t),i.appendChild(t)}else"styles"===t?"object"==typeof o&&Object.keys(o).map((t=>{i.style[t]=o[t]})):t in i?i[t]=o:i.setAttribute(t,o)}return i},e.on=(t,n,i,o)=>{o?e.delegate(t,n,i,o):(o=i,e.bind(t,n,o))},e.off=(t,e,n)=>{t.removeEventListener(e,n)},e.bind=(t,e,n)=>{e.split(/\s+/).forEach((function(e){t.addEventListener(e,n)}))},e.delegate=(t,e,n,i)=>{t.addEventListener(e,(function(t){const e=t.target.closest(n);e&&(t.delegatedTarget=e,i.call(this,t,e))}))},e.unbind=(t,e)=>{if(t)for(let n in e){let i=e[n];n.split(/\s+/).forEach((function(e){t.removeEventListener(e,i)}))}},e.fire=(t,e,n)=>{let i=document.createEvent("HTMLEvents");i.initEvent(e,!0,!0);for(let t in n)i[t]=n[t];return t.dispatchEvent(i)},e.data=(t,e)=>{if(!e)return t.dataset;for(const n in e)t.dataset[n]=e[n]},e.style=(t,n)=>{if("string"==typeof n)return e.getStyle(t,n);Array.isArray(t)||(t=[t]),t.map((t=>{for(const e in n)t.style[e]=n[e]}))},e.removeStyle=(t,e)=>{Array.isArray(t)||(t=[t]),Array.isArray(e)||(e=[e]),t.map((t=>{for(const n of e)t.style[n]=""}))},e.getStyle=(t,e)=>{if(!e)return getComputedStyle(t);let n=getComputedStyle(t)[e];return["width","height"].includes(e)&&(n=parseFloat(n)),n},e.closest=(t,n)=>n?n.matches(t)?n:e.closest(t,n.parentNode):null,e.inViewport=(t,e)=>{const{top:n,left:i,bottom:o,right:s}=t.getBoundingClientRect(),{top:r,left:l,bottom:a,right:h}=e.getBoundingClientRect();return n>=r&&i>=l&&o<=a&&s<=h},e.scrollTop=function(t,e){requestAnimationFrame((()=>{t.scrollTop=e}))},e.scrollbarSize=function(){return e.scrollBarSizeValue||(e.scrollBarSizeValue=function(){const t=document.createElement("div");e.style(t,{width:"100px",height:"100px",overflow:"scroll",position:"absolute",top:"-9999px"}),document.body.appendChild(t);const n=t.offsetWidth-t.clientWidth;return document.body.removeChild(t),n}()),e.scrollBarSizeValue},e.hasVerticalOverflow=function(t){return t.scrollHeight>t.offsetHeight+10},e.hasHorizontalOverflow=function(t){return t.scrollWidth>t.offsetWidth+10},e.measureTextWidth=function(t){const e=document.createElement("div");return e.style.position="absolute",e.style.visibility="hidden",e.style.height="auto",e.style.width="auto",e.style.whiteSpace="nowrap",e.innerText=t,document.body.appendChild(e),e.clientWidth+1};var n=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},i="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function o(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}var s="object"==typeof i&&i&&i.Object===Object&&i,r=Object.freeze({default:s,__moduleExports:s}),l=r&&s||r,a="object"==typeof self&&self&&self.Object===Object&&self,h=l||a||Function("return this")(),d=function(){return h.Date.now()},c=h.Symbol,u=Object.prototype,g=u.hasOwnProperty,m=u.toString,p=c?c.toStringTag:void 0;var f=function(t){var e=g.call(t,p),n=t[p];try{t[p]=void 0}catch(t){}var i=m.call(t);return e?t[p]=n:delete t[p],i},w=Object.prototype.toString;var C=function(t){return w.call(t)},y=c?c.toStringTag:void 0;var v=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":y&&y in Object(t)?f(t):C(t)};var b=function(t){return null!=t&&"object"==typeof t};var _=function(t){return"symbol"==typeof t||b(t)&&"[object Symbol]"==v(t)},x=/^\s+|\s+$/g,R=/^[-+]0x[0-9a-f]+$/i,I=/^0b[01]+$/i,S=/^0o[0-7]+$/i,$=parseInt;var T=function(t){if("number"==typeof t)return t;if(_(t))return NaN;if(n(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=n(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(x,"");var i=I.test(t);return i||S.test(t)?$(t.slice(2),i?2:8):R.test(t)?NaN:+t},H=Math.max,E=Math.min;var k=function(t,e,i){var o,s,r,l,a,h,c=0,u=!1,g=!1,m=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function p(e){var n=o,i=s;return o=s=void 0,c=e,l=t.apply(i,n)}function f(t){return c=t,a=setTimeout(C,e),u?p(t):l}function w(t){var n=t-h;return void 0===h||n>=e||n<0||g&&t-c>=r}function C(){var t=d();if(w(t))return y(t);a=setTimeout(C,function(t){var n=e-(t-h);return g?E(n,r-(t-c)):n}(t))}function y(t){return a=void 0,m&&o?p(t):(o=s=void 0,l)}function v(){var t=d(),n=w(t);if(o=arguments,s=this,h=t,n){if(void 0===a)return f(h);if(g)return a=setTimeout(C,e),p(h)}return void 0===a&&(a=setTimeout(C,e)),l}return e=T(e)||0,n(i)&&(u=!!i.leading,r=(g="maxWait"in i)?H(T(i.maxWait)||0,e):r,m="trailing"in i?!!i.trailing:m),v.cancel=function(){void 0!==a&&clearTimeout(a),c=0,o=h=s=a=void 0},v.flush=function(){return void 0===a?l:y(d())},v};var M=function(t,e,i){var o=!0,s=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return n(i)&&(o="leading"in i?!!i.leading:o,s="trailing"in i?!!i.trailing:s),k(t,e,{leading:o,maxWait:e,trailing:s})};var L,O=function(t){if(!n(t))return!1;var e=v(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},F=h["__core-js_shared__"],A=(L=/[^.]+$/.exec(F&&F.keys&&F.keys.IE_PROTO||""))?"Symbol(src)_1."+L:"";var D=function(t){return!!A&&A in t},W=Function.prototype.toString;var N=function(t){if(null!=t){try{return W.call(t)}catch(t){}try{return t+""}catch(t){}}return""},z=/^\[object .+?Constructor\]$/,j=Function.prototype,P=Object.prototype,B=j.toString,V=P.hasOwnProperty,q=RegExp("^"+B.call(V).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var K=function(t){return!(!n(t)||D(t))&&(O(t)?q:z).test(N(t))};var U=function(t,e){return null==t?void 0:t[e]};var X=function(t,e){var n=U(t,e);return K(n)?n:void 0},Z=X(Object,"create");var G=function(){this.__data__=Z?Z(null):{},this.size=0};var Y=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},J=Object.prototype.hasOwnProperty;var Q=function(t){var e=this.__data__;if(Z){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return J.call(e,t)?e[t]:void 0},tt=Object.prototype.hasOwnProperty;var et=function(t){var e=this.__data__;return Z?void 0!==e[t]:tt.call(e,t)};var nt=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Z&&void 0===e?"__lodash_hash_undefined__":e,this};function it(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}it.prototype.clear=G,it.prototype.delete=Y,it.prototype.get=Q,it.prototype.has=et,it.prototype.set=nt;var ot=it;var st=function(){this.__data__=[],this.size=0};var rt=function(t,e){return t===e||t!=t&&e!=e},lt=Object.freeze({default:rt,__moduleExports:rt}),at=lt&&rt||lt;var ht=function(t,e){for(var n=t.length;n--;)if(at(t[n][0],e))return n;return-1},dt=Array.prototype.splice;var ct=function(t){var e=this.__data__,n=ht(e,t);return!(n<0)&&(n==e.length-1?e.pop():dt.call(e,n,1),--this.size,!0)};var ut=function(t){var e=this.__data__,n=ht(e,t);return n<0?void 0:e[n][1]};var gt=function(t){return ht(this.__data__,t)>-1};var mt=function(t,e){var n=this.__data__,i=ht(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this};function pt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}pt.prototype.clear=st,pt.prototype.delete=ct,pt.prototype.get=ut,pt.prototype.has=gt,pt.prototype.set=mt;var ft=pt,wt=X(h,"Map");var Ct=function(){this.size=0,this.__data__={hash:new ot,map:new(wt||ft),string:new ot}};var yt=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};var vt=function(t,e){var n=t.__data__;return yt(e)?n["string"==typeof e?"string":"hash"]:n.map};var bt=function(t){var e=vt(this,t).delete(t);return this.size-=e?1:0,e};var _t=function(t){return vt(this,t).get(t)};var xt=function(t){return vt(this,t).has(t)};var Rt=function(t,e){var n=vt(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this};function It(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}It.prototype.clear=Ct,It.prototype.delete=bt,It.prototype.get=_t,It.prototype.has=xt,It.prototype.set=Rt;var St=It;var $t=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this};var Tt=function(t){return this.__data__.has(t)};function Ht(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new St;++e<n;)this.add(t[e])}Ht.prototype.add=Ht.prototype.push=$t,Ht.prototype.has=Tt;var Et=Ht;var kt=function(t,e,n,i){for(var o=t.length,s=n+(i?1:-1);i?s--:++s<o;)if(e(t[s],s,t))return s;return-1};var Mt=function(t){return t!=t};var Lt=function(t,e,n){for(var i=n-1,o=t.length;++i<o;)if(t[i]===e)return i;return-1};var Ot=function(t,e,n){return e==e?Lt(t,e,n):kt(t,Mt,n)};var Ft=function(t,e){return!!(null==t?0:t.length)&&Ot(t,e,0)>-1};var At=function(t,e,n){for(var i=-1,o=null==t?0:t.length;++i<o;)if(n(e,t[i]))return!0;return!1};var Dt=function(t,e){return t.has(e)},Wt=X(h,"Set");var Nt=function(){};var zt=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n},jt=Wt&&1/zt(new Wt([,-0]))[1]==1/0?function(t){return new Wt(t)}:Nt;var Pt=function(t,e,n){var i=-1,o=Ft,s=t.length,r=!0,l=[],a=l;if(n)r=!1,o=At;else if(s>=200){var h=e?null:jt(t);if(h)return zt(h);r=!1,o=Dt,a=new Et}else a=e?[]:l;t:for(;++i<s;){var d=t[i],c=e?e(d):d;if(d=n||0!==d?d:0,r&&c==c){for(var u=a.length;u--;)if(a[u]===c)continue t;e&&a.push(c),l.push(d)}else o(a,c,n)||(a!==l&&a.push(c),l.push(d))}return l};var Bt=function(t){return t&&t.length?Pt(t):[]};function Vt(t){return t.replace(/([A-Z])/g,(t=>`-${t[0].toLowerCase()}`))}function qt(t){return Object.keys(t).map((e=>{const n=Vt(e),i=t[e];return void 0===i?"":`data-${n}="${i}" `})).join("").trim()}function Kt(t){var e=document.createElement("textarea");e.style.position="fixed",e.style.top=0,e.style.left=0,e.style.width="2em",e.style.height="2em",e.style.padding=0,e.style.border="none",e.style.outline="none",e.style.boxShadow="none",e.style.background="transparent",e.value=t,document.body.appendChild(e),e.select();try{document.execCommand("copy")}catch(t){console.log("Oops, unable to copy")}document.body.removeChild(e)}let Ut=M,Xt=k;function Zt(t,e=null){return(...n)=>new Promise((i=>{setTimeout((()=>{const o=t.apply(e,n);i(o)}))}))}function Gt(t,e,n){const i=n.reduce(((t,n)=>(t[n]={get:()=>e[n]},t)),{});Object.defineProperties(t,i)}function Yt(t){return!isNaN(t)}function Jt(t){return Bt(t)}function Qt(t,e){return t-e}function te(t){return t.replace(/<[^>]*>/g,"")}class ee extends TypeError{}let ne='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>',ie='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"><polyline points="9 18 15 12 9 6"></polyline></svg>';class oe{constructor(t){this.instance=t,Gt(this,this.instance,["wrapper","options","style","header","bodyScrollable","columnmanager","rowmanager","datamanager","keyboard"]),this.bindEvents()}bindEvents(){this.bindFocusCell(),this.bindEditCell(),this.bindKeyboardSelection(),this.bindCopyCellContents(),this.bindMouseEvents(),this.bindTreeEvents()}bindFocusCell(){this.bindKeyboardNav()}bindEditCell(){this.$editingCell=null,e.on(this.bodyScrollable,"dblclick",".dt-cell",((t,e)=>{this.activateEditing(e)})),this.keyboard.on("enter",(()=>{this.$focusedCell&&!this.$editingCell?this.activateEditing(this.$focusedCell):this.$editingCell&&this.deactivateEditing()}))}bindKeyboardNav(){const t=t=>{if(!this.$focusedCell||this.$editingCell)return!1;let n=this.$focusedCell;const{rowIndex:i,colIndex:o}=e.data(n);return"left"===t?n=this.getLeftMostCell$(i):"right"===t?n=this.getRightMostCell$(i):"up"===t?n=this.getTopMostCell$(o):"down"===t&&(n=this.getBottomMostCell$(o)),this.focusCell(n),!0};["left","right","up","down","tab","shift+tab"].map((t=>this.keyboard.on(t,(()=>this.focusCellInDirection(t))))),["left","right","up","down"].map((e=>this.keyboard.on(`ctrl+${e}`,(()=>t(e))))),this.keyboard.on("esc",(()=>{this.deactivateEditing(!1),this.columnmanager.toggleFilter(!1)})),this.options.inlineFilters&&(this.keyboard.on("ctrl+f",(t=>{const n=e.closest(".dt-cell",t.target),{colIndex:i}=e.data(n);return this.activateFilter(i),!0})),e.on(this.header,"focusin",".dt-filter",(()=>{this.unfocusCell(this.$focusedCell)})))}bindKeyboardSelection(){const t=t=>{let e=this.getSelectionCursor();return"left"===t?e=this.getLeftCell$(e):"right"===t?e=this.getRightCell$(e):"up"===t?e=this.getAboveCell$(e):"down"===t&&(e=this.getBelowCell$(e)),e};["left","right","up","down"].map((e=>this.keyboard.on(`shift+${e}`,(()=>this.selectArea(t(e))))))}bindCopyCellContents(){this.keyboard.on("ctrl+c",(()=>{const t=this.copyCellContents(this.$focusedCell,this.$selectionCursor),e=this.instance.translate("{count} cells copied",{count:t});t&&this.instance.showToastMessage(e,2)})),this.options.pasteFromClipboard&&this.keyboard.on("ctrl+v",(t=>(this.instance.pasteTarget.focus(),setTimeout((()=>{const t=this.instance.pasteTarget.value;this.instance.pasteTarget.value="",this.pasteContentInCell(t)}),10),!1)))}bindMouseEvents(){let t=null;e.on(this.bodyScrollable,"mousedown",".dt-cell",(n=>{t=!0,this.focusCell(e(n.delegatedTarget))})),e.on(this.bodyScrollable,"mouseup",(()=>{t=!1}));e.on(this.bodyScrollable,"mousemove",".dt-cell",Ut((n=>{t&&this.selectArea(e(n.delegatedTarget))}),50))}bindTreeEvents(){e.on(this.bodyScrollable,"click",".dt-tree-node__toggle",((t,n)=>{const i=e.closest(".dt-cell",n),{rowIndex:o}=e.data(i);i.classList.contains("dt-cell--tree-close")?this.rowmanager.openSingleNode(o):this.rowmanager.closeSingleNode(o)}))}focusCell(t,{skipClearSelection:n=0,skipDOMFocus:i=0,skipScrollToCell:o=0}={}){if(!t)return;if(t===this.$editingCell)return;const{colIndex:s,isHeader:r}=e.data(t);if(r)return;!1!==this.columnmanager.getColumn(s).focusable&&(o||this.scrollToCell(t),this.deactivateEditing(),n||this.clearSelection(),this.$focusedCell&&this.$focusedCell.classList.remove("dt-cell--focus"),this.$focusedCell=t,t.classList.add("dt-cell--focus"),i||t.focus(),this.highlightRowColumnHeader(t))}unfocusCell(t){t&&(t.classList.remove("dt-cell--focus"),this.$focusedCell=null,this.lastHeaders&&this.lastHeaders.forEach((t=>t&&t.classList.remove("dt-cell--highlight"))))}highlightRowColumnHeader(t){const{colIndex:n,rowIndex:i}=e.data(t),o=`.dt-cell--header-${n}`,s=`.dt-cell--${this.datamanager.getColumnIndexById("_rowIndex")}-${i}`;this.lastHeaders&&this.lastHeaders.forEach((t=>t&&t.classList.remove("dt-cell--highlight")));const r=e(o,this.wrapper),l=e(s,this.wrapper);this.lastHeaders=[r,l],this.lastHeaders.forEach((t=>t&&t.classList.add("dt-cell--highlight")))}selectAreaOnClusterChanged(){if(!this.$focusedCell||!this.$selectionCursor)return;const{colIndex:t,rowIndex:n}=e.data(this.$selectionCursor),i=this.getCell$(t,n);if(!i||i===this.$selectionCursor)return;const o=e.data(this.$focusedCell);this.$focusedCell=this.getCell$(o.colIndex,o.rowIndex),this.selectArea(i)}focusCellOnClusterChanged(){if(!this.$focusedCell)return;const{colIndex:t,rowIndex:n}=e.data(this.$focusedCell),i=this.getCell$(t,n);i&&this.focusCell(i,{skipClearSelection:1,skipDOMFocus:1,skipScrollToCell:1})}selectArea(t){this.$focusedCell&&this._selectArea(this.$focusedCell,t)&&(this.$selectionCursor=t)}_selectArea(t,e){if(t===e)return!1;const n=this.getCellsInRange(t,e);return!!n&&(this.clearSelection(),this._selectedCells=n.map((t=>this.getCell$(...t))),requestAnimationFrame((()=>{this._selectedCells.map((t=>t.classList.add("dt-cell--highlight")))})),!0)}getCellsInRange(t,n){let i,o,s,r;if("number"==typeof t)[i,o,s,r]=arguments;else if("object"==typeof t){if(!t||!n)return!1;const l=e.data(t),a=e.data(n);i=+l.colIndex,o=+l.rowIndex,s=+a.colIndex,r=+a.rowIndex}if(o>r&&([o,r]=[r,o]),i>s&&([i,s]=[s,i]),this.isStandardCell(i)||this.isStandardCell(s))return!1;const l=[];let a=i,h=o;const d=[];for(;h<=r;)d.push(h),h+=1;return d.map((t=>{for(;a<=s;)l.push([a,t]),a++;a=i})),l}clearSelection(){(this._selectedCells||[]).forEach((t=>t.classList.remove("dt-cell--highlight"))),this._selectedCells=[],this.$selectionCursor=null}getSelectionCursor(){return this.$selectionCursor||this.$focusedCell}activateEditing(t){this.focusCell(t);const{rowIndex:n,colIndex:i}=e.data(t),o=this.columnmanager.getColumn(i);if(o&&(!1===o.editable||!1===o.focusable))return;const s=this.getCell(i,n);if(s&&!1===s.editable)return;if(this.$editingCell){const{_rowIndex:t,_colIndex:o}=e.data(this.$editingCell);if(n===t&&i===o)return}this.$editingCell=t,t.classList.add("dt-cell--editing");const r=e(".dt-cell__edit",t);r.innerHTML="";const l=this.getEditor(i,n,s.content,r);l&&(this.currentCellEditor=l,l.initValue(s.content,n,o))}deactivateEditing(t=!0){t&&this.submitEditing(),this.$focusedCell&&this.$focusedCell.focus(),this.$editingCell&&(this.$editingCell.classList.remove("dt-cell--editing"),this.$editingCell=null)}getEditor(t,e,n,i){const o=this.datamanager.getColumn(t),s=this.datamanager.getRow(e),r=this.datamanager.getData(e);let l=this.options.getEditor?this.options.getEditor(t,e,n,i,o,s,r):this.getDefaultEditor(i);return!1!==l&&(void 0===l&&(l=this.getDefaultEditor(i)),l)}getDefaultEditor(t){const n=e.create("input",{class:"dt-input",type:"text",inside:t});return{initValue(t){n.focus(),n.value=t},getValue:()=>n.value,setValue(t){n.value=t}}}submitEditing(){let t=Promise.resolve();if(!this.$editingCell)return t;const n=this.$editingCell,{rowIndex:i,colIndex:o}=e.data(n),s=this.datamanager.getColumn(o);if(n){const e=this.currentCellEditor;if(e){let r=e.getValue();r.then||(r=Promise.resolve(r)),t=r.then((t=>{const r=this.getCell(o,i).content;if(r===t)return!1;const l=e.setValue(t,i,s);return this.updateCell(o,i,t,!0),n.focus(),l&&l.then&&l.catch((t=>{console.log(t),this.updateCell(o,i,r)})),l}))}}return this.currentCellEditor=null,t}copyCellContents(t,n){if(!n&&t){const{colIndex:n,rowIndex:i}=e.data(t);return Kt(this.getCell(n,i).content),1}const i=this.getCellsInRange(t,n);if(!i)return 0;const o=i.map((t=>this.getCell(...t))).reduce(((t,e)=>{const n=e.rowIndex;return t[n]=t[n]||[],t[n].push(e.content),t}),[]);return Kt(o.map((t=>t.join("\t"))).join("\n")),o.reduce(((t,e)=>t+e.length),0)}pasteContentInCell(t){if(!this.$focusedCell)return;const n=t.split("\n").map((t=>t.split("\t"))).filter((t=>t.length&&t.every((t=>t))));let{colIndex:i,rowIndex:o}=e.data(this.$focusedCell),s=+i,r=+o;n.forEach(((t,e)=>{let n=e+r;t.forEach(((t,e)=>{let i=e+s;this.updateCell(i,n,t,!0)}))}))}activateFilter(t){this.columnmanager.toggleFilter(),this.columnmanager.focusFilter(t),this.columnmanager.isFilterShown||this.$focusedCell&&this.$focusedCell.focus()}updateCell(t,e,n,i=!1){const o=this.datamanager.updateCell(t,e,{content:n});this.refreshCell(o,i)}refreshCell(t,n=!1){e(this.selector(t.colIndex,t.rowIndex),this.bodyScrollable).innerHTML=this.getCellContent(t,n)}toggleTreeButton(t,e){const n=this.columnmanager.getFirstColumnIndex(),i=this.getCell$(n,t);i&&i.classList[e?"remove":"add"]("dt-cell--tree-close")}isStandardCell(t){return t<this.columnmanager.getFirstColumnIndex()}focusCellInDirection(t){if(!this.$focusedCell||this.$editingCell&&["left","right","up","down"].includes(t))return!1;this.$editingCell&&["tab","shift+tab"].includes(t)&&this.deactivateEditing();let n=this.$focusedCell;if("left"===t||"shift+tab"===t?n=this.getLeftCell$(n):"right"===t||"tab"===t?n=this.getRightCell$(n):"up"===t?n=this.getAboveCell$(n):"down"===t&&(n=this.getBelowCell$(n)),!n)return!1;const{colIndex:i}=e.data(n);if(!this.columnmanager.getColumn(i).focusable){let e=this.$focusedCell;this.unfocusCell(e),this.$focusedCell=n;let i=this.focusCellInDirection(t);return i||this.focusCell(e),i}return this.focusCell(n),!0}getCell$(t,n){return e(this.selector(t,n),this.bodyScrollable)}getAboveCell$(t){const{colIndex:n}=e.data(t);let i=t.parentElement.previousElementSibling;for(;i&&i.classList.contains("dt-row--hide");)i=i.previousElementSibling;return i?e(`.dt-cell--col-${n}`,i):t}getBelowCell$(t){const{colIndex:n}=e.data(t);let i=t.parentElement.nextElementSibling;for(;i&&i.classList.contains("dt-row--hide");)i=i.nextElementSibling;return i?e(`.dt-cell--col-${n}`,i):t}getLeftCell$(t){return t.previousElementSibling}getRightCell$(t){return t.nextElementSibling}getLeftMostCell$(t){return this.getCell$(this.columnmanager.getFirstColumnIndex(),t)}getRightMostCell$(t){return this.getCell$(this.columnmanager.getLastColumnIndex(),t)}getTopMostCell$(t){return this.getCell$(t,this.rowmanager.getFirstRowIndex())}getBottomMostCell$(t){return this.getCell$(t,this.rowmanager.getLastRowIndex())}getCell(t,e){return this.instance.datamanager.getCell(t,e)}getRowHeight(){return e.style(e(".dt-row",this.bodyScrollable),"height")}scrollToCell(t){if(e.inViewport(t,this.bodyScrollable))return!1;const{rowIndex:n}=e.data(t);return this.rowmanager.scrollToRow(n),!1}getRowCountPerPage(){return Math.ceil(this.instance.getViewportHeight()/this.getRowHeight())}getCellHTML(t){const{rowIndex:e,colIndex:n,isHeader:i,isFilter:o,isTotalRow:s}=t,r=qt({rowIndex:e,colIndex:n,isHeader:i,isFilter:o,isTotalRow:s}),l=this.datamanager.getRow(e),a=!(i||o||s);return`\n            <div class="${["dt-cell","dt-cell--col-"+n,a?`dt-cell--${n}-${e}`:"",a?"dt-cell--row-"+e:"",i?"dt-cell--header":"",i?`dt-cell--header-${n}`:"",o?"dt-cell--filter":"",a&&l&&l.meta.isTreeNodeClose?"dt-cell--tree-close":""].join(" ")}" ${r} tabindex="0">\n                ${this.getCellContent(t)}\n            </div>\n        `}getCellContent(t,e=!1){const{isHeader:n,isFilter:i,colIndex:o}=t,s=!n&&!1!==t.editable?this.getEditCellHTML(o):"",r=n&&!1!==t.sortable?`<span class="sort-indicator">\n                ${this.options.sortIndicator[t.sortOrder]}\n            </span>`:"",l=n&&!1!==t.resizable?'<span class="dt-cell__resize-handle"></span>':"",a=n&&!1!==t.dropdown?this.columnmanager.getDropdownHTML():"";let h,d=oe.getCustomCellFormatter(t);if(n||i||!d)h=t.content;else if(!t.html||e){const e=this.datamanager.getRow(t.rowIndex),n=this.datamanager.getData(t.rowIndex);h=d(t.content,e,t.column,n)}else h=t.html;if(t.html=h,this.options.treeView&&!n&&!i&&void 0!==t.indent){const e=this.datamanager.getRow(t.rowIndex+1),n=e&&e.meta.indent>t.indent,i=20,o="px";if(this.datamanager.getColumnIndexById("_rowIndex")+1===t.colIndex){const e=(t.indent||0)*i;h=`<span class="dt-tree-node" style="padding-left: ${e}${o}">\n                    ${n?`<span class="dt-tree-node__toggle" style="left: ${e-i}${o}">\n                        <span class="icon-open">${ne}</span>\n                        <span class="icon-close">${ie}</span>\n                    </span>`:""}\n                    <span>${h}</span>\n                </span>`}}return`\n            <div class="${["dt-cell__content",n?`dt-cell__content--header-${o}`:`dt-cell__content--col-${o}`].join(" ")}">\n                ${h}\n                ${r}\n                ${l}\n                ${a}\n            </div>\n            ${s}\n        `}getEditCellHTML(t){return`<div class="dt-cell__edit dt-cell__edit--col-${t}"></div>`}selector(t,e){return`.dt-cell--${t}-${e}`}static getCustomCellFormatter(t){return t.format||t.column&&t.column.format||null}}var se,re,le,ae=(se=function(t,e){t.exports=function t(e,n,i){function s(l,a){if(!n[l]){if(!e[l]){if(!a&&o)return o();if(r)return r(l,!0);var h=new Error("Cannot find module '"+l+"'");throw h.code="MODULE_NOT_FOUND",h}var d=n[l]={exports:{}};e[l][0].call(d.exports,(function(t){var n=e[l][1][t];return s(n||t)}),d,d.exports,t,e,n,i)}return n[l].exports}for(var r=o,l=0;l<i.length;l++)s(i[l]);return s}({1:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s={width:"100%",height:"100%"},r=function(t){return Number(t)==Number(t)},l=function(){function t(e,n){var i=this;o(this,t),this._config={},this._lastRepaint=null,this._maxElementHeight=t.getMaxBrowserHeight(),this.refresh(e,n);var s=this._config;!function t(){var e=i._getScrollPosition(),n=i._lastRepaint;if(i._renderAnimationFrame=window.requestAnimationFrame(t),e!==n&&(!n||Math.abs(e-n)>i._averageHeight)){var o=i._renderChunk();i._lastRepaint=e,!1!==o&&"function"==typeof s.afterRender&&s.afterRender()}}()}return i(t,null,[{key:"create",value:function(e,n){return new t(e,n)}},{key:"mergeStyle",value:function(t,e){for(var n in e)t.style[n]!==e[n]&&(t.style[n]=e[n])}},{key:"getMaxBrowserHeight",value:function(){var e=document.createElement("div"),n=document.createElement("div");t.mergeStyle(e,{position:"absolute",height:"1px",opacity:0}),t.mergeStyle(n,{height:"1e7px"}),e.appendChild(n),document.body.appendChild(e);var i=n.offsetHeight;return document.body.removeChild(e),i}}]),i(t,[{key:"destroy",value:function(){window.cancelAnimationFrame(this._renderAnimationFrame)}},{key:"refresh",value:function(e,n){var i=this;if(Object.assign(this._config,s,n),!e||1!==e.nodeType)throw new Error("HyperList requires a valid DOM Node container");this._element=e;var o=this._config,l=this._scroller||o.scroller||document.createElement(o.scrollerTagName||"tr");if("boolean"!=typeof o.useFragment&&(this._config.useFragment=!0),!o.generate)throw new Error("Missing required `generate` function");if(!r(o.total))throw new Error("Invalid required `total` value, expected number");if(!Array.isArray(o.itemHeight)&&!r(o.itemHeight))throw new Error("\n        Invalid required `itemHeight` value, expected number or array\n      ".trim());r(o.itemHeight)?this._itemHeights=Array(o.total).fill(o.itemHeight):this._itemHeights=o.itemHeight,Object.keys(s).filter((function(t){return t in o})).forEach((function(t){var e=o[t],n=r(e),s=!n&&"%"===e.slice(-1);if(e&&"string"!=typeof e&&"number"!=typeof e)throw new Error("Invalid optional `"+t+"`, expected string or number");if(n&&(o[t]=e+"px"),"height"===t){var l=n?e:parseInt(e.replace(/px|%/,""),10);i._containerHeight=s?window.innerHeight*l/100:r(e)?e:l}}));var a={width:""+o.width,height:""+o.height,overflow:"auto",position:"relative"};t.mergeStyle(e,a);var h=o.itemHeight*o.total,d=this._maxElementHeight;h>d&&console.warn(["HyperList: The maximum element height",d+"px has","been exceeded; please reduce your item height."].join(" "));var c={opacity:"0",position:"absolute",width:"1px",height:h+"px"};t.mergeStyle(l,c),this._scroller||e.appendChild(l),this._scroller=l,this._scrollHeight=this._computeScrollHeight(),this._itemPositions=this._itemPositions||Array(o.total).fill(0),this._computePositions(0),this._renderChunk(null!==this._lastRepaint),"function"==typeof o.afterRender&&o.afterRender()}},{key:"_getRow",value:function(e){var n=this._config,i=n.generate(e),o=i.height;if(void 0!==o&&r(o)?(i=i.element,o!==this._itemHeights&&(this._itemHeights[e]=o,this._computePositions(e),this._scrollHeight=this._computeScrollHeight(e))):o=this._itemHeights[e],!i||1!==i.nodeType)throw new Error("Generator did not return a DOM Node for index: "+e);var s=i.getAttribute("class")||"";i.setAttribute("class",s+" "+(n.rowClassName||"vrow"));var l=this._itemPositions[e];return t.mergeStyle(i,{position:"absolute",top:l+"px"}),i}},{key:"_getScrollPosition",value:function(){var t=this._config;return"function"==typeof t.overrideScrollPosition?t.overrideScrollPosition():this._element.scrollTop}},{key:"_renderChunk",value:function(t){var e=this._config,n=this._element,i=this._getScrollPosition(),o=e.total,s=e.reverse?this._getReverseFrom(i):this._getFrom(i)-1;if((s<0||s-this._screenItemsLen<0)&&(s=0),!t&&this._lastFrom===s)return!1;this._lastFrom=s;var r=s+this._cachedItemsLen;(r>o||r+this._cachedItemsLen>o)&&(r=o);var l=e.useFragment?document.createDocumentFragment():[],a=this._scroller;l[e.useFragment?"appendChild":"push"](a);for(var h=s;h<r;h++){var d=this._getRow(h);l[e.useFragment?"appendChild":"push"](d)}if(e.applyPatch)return e.applyPatch(n,l);n.innerHTML="",n.appendChild(l)}},{key:"_computePositions",value:function(){var t=arguments.length<=0||void 0===arguments[0]?1:arguments[0],e=this._config,n=e.total,i=e.reverse;t<1&&!i&&(t=1);for(var o=t;o<n;o++)i?0===o?this._itemPositions[0]=this._scrollHeight-this._itemHeights[0]:this._itemPositions[o]=this._itemPositions[o-1]-this._itemHeights[o]:this._itemPositions[o]=this._itemHeights[o-1]+this._itemPositions[o-1]}},{key:"_computeScrollHeight",value:function(){var e=this,n=this._config,i=n.total,o=this._itemHeights.reduce((function(t,e){return t+e}),0);t.mergeStyle(this._scroller,{opacity:0,position:"absolute",width:"1px",height:o+"px"});var s=this._itemHeights.slice(0).sort((function(t,e){return t-e})),r=Math.floor(i/2),l=i%2==0?(s[r]+s[r-1])/2:s[r],a=this._element.clientHeight?this._element.clientHeight:this._containerHeight;return this._screenItemsLen=Math.ceil(a/l),this._containerHeight=a,this._cachedItemsLen=Math.max(this._cachedItemsLen||0,3*this._screenItemsLen),this._averageHeight=l,n.reverse&&window.requestAnimationFrame((function(){e._element.scrollTop=o})),o}},{key:"_getFrom",value:function(t){for(var e=0;this._itemPositions[e]<t;)e++;return e}},{key:"_getReverseFrom",value:function(t){for(var e=this._config.total-1;e>0&&this._itemPositions[e]<t+this._containerHeight;)e--;return e}}]),t}();n.default=l,e.exports=n.default},{}]},{},[1])(1)},se(re={exports:{}},re.exports),re.exports),he=(le=ae)&&le.__esModule&&Object.prototype.hasOwnProperty.call(le,"default")?le.default:le;const de={13:"enter",91:"meta",16:"shift",17:"ctrl",18:"alt",37:"left",38:"up",39:"right",40:"down",9:"tab",27:"esc",67:"c",70:"f",86:"v"};var ce={"Sort Ascending":"Sort Ascending","Sort Descending":"Sort Descending","Reset sorting":"Reset sorting","Remove column":"Remove column","No Data":"No Data","{count} cells copied":{1:"{count} cell copied",default:"{count} cells copied"},"{count} rows selected":{1:"{count} row selected",default:"{count} rows selected"}},ue={"Sort Ascending":"Aufsteigend sortieren","Sort Descending":"Absteigend sortieren","Reset sorting":"Sortierung zurücksetzen","Remove column":"Spalte entfernen","No Data":"Keine Daten","{count} cells copied":{1:"{count} Zelle kopiert",default:"{count} Zellen kopiert"},"{count} rows selected":{1:"{count} Zeile ausgewählt",default:"{count} Zeilen ausgewählt"}},ge={"Sort Ascending":"Trier par ordre croissant","Sort Descending":"Trier par ordre décroissant","Reset sorting":"Réinitialiser le tri","Remove column":"Supprimer colonne","No Data":"Pas de données","{count} cells copied":{1:"{count} cellule copiée",default:"{count} cellules copiées"},"{count} rows selected":{1:"{count} ligne sélectionnée",default:"{count} lignes sélectionnées"}},me={"Sort Ascending":"Ordinamento ascendente","Sort Descending":"Ordinamento decrescente","Reset sorting":"Azzeramento ordinamento","Remove column":"Rimuovi colonna","No Data":"Nessun dato","{count} cells copied":{1:"Copiato {count} cella",default:"{count} celle copiate"},"{count} rows selected":{1:"{count} linea selezionata",default:"{count} linee selezionate"}};class pe{constructor(t){this.language=t,this.translations={en:ce,de:ue,fr:ge,it:me}}addTranslations(t){this.translations=Object.assign(this.translations,t)}translate(t,e){let n=this.translations[this.language]&&this.translations[this.language][t]||t;return"object"==typeof n&&(n=e&&e.count?this.getPluralizedTranslation(n,e.count):t),function(t,e){return t?(Object.keys(e).forEach((n=>{let i=new RegExp(`{(${n})}`,"g");t=t.replace(i,e[n])})),t):t}(n,e||{})}getPluralizedTranslation(t,e){return t[e]||t.default}}function fe(t,e){let n=[];if(0===Object.keys(e).length)return t.map((t=>t.meta.rowIndex));for(let i in e){const o=e[i],s=(n.length?n.map((e=>t[e])):t).map((t=>t[i]));let r=Ce(o),l=we(t,r);n=l?l(r.text,s):s.map((t=>t.rowIndex))}return n}function we(t,e){const n=e=>String(te(e.html||"")||(e=>{let n=oe.getCustomCellFormatter(e);return n&&e.content?(e.html=n(e.content,t[e.rowIndex],e.column,t[e.rowIndex]),te(e.html)):e.content||""})(e)).toLowerCase(),i=t=>parseFloat(t.content),o=(t,e)=>{if(t.column.compareValue){const n=t.column.compareValue(t,e);if(n&&Array.isArray(n))return n}const o=i(t);return isNaN(o)?[n(t),e]:[o,e]};return{contains:(t,e)=>e.filter((e=>{const i=n(e),o=(t||"").toLowerCase();return!o||i.includes(o)})).map((t=>t.rowIndex)),greaterThan:(t,e)=>e.filter((e=>{const[n,i]=o(e,t);return n>i})).map((t=>t.rowIndex)),lessThan:(t,e)=>e.filter((e=>{const[n,i]=o(e,t);return n<i})).map((t=>t.rowIndex)),equals:(t,e)=>e.filter((e=>parseFloat(e.content)===t)).map((t=>t.rowIndex)),notEquals:(t,e)=>e.filter((e=>parseFloat(e.content)!==t)).map((t=>t.rowIndex)),range:(t,e)=>e.filter((e=>{const n=o(e,t[0]),i=o(e,t[1]),s=n[0];return s>=n[1]&&s<=i[1]})).map((t=>t.rowIndex)),containsNumber:(t,e)=>e.filter((e=>{let o=parseFloat(t,10),s=t,r=i(e),l=n(e);return o===r||l.includes(s)})).map((t=>t.rowIndex))}[e.type]}function Ce(t=""){if(0===t.length)return{};let e=t;return[">","<","="].includes(e[0])?e=t.slice(1):e.startsWith("!=")&&(e=t.slice(2)),t.startsWith(">")&&e?{type:"greaterThan",text:e.trim()}:t.startsWith("<")&&e?{type:"lessThan",text:e.trim()}:t.startsWith("=")&&Yt(e)?{type:"equals",text:Number(t.slice(1).trim())}:Yt(e)?{type:"containsNumber",text:e}:t.startsWith("!=")&&Yt(e)?{type:"notEquals",text:Number(t.slice(2).trim())}:2===t.split(":").length?(e=t.split(":"),{type:"range",text:e.map((t=>t.trim()))}):{type:"contains",text:e.toLowerCase()}}let ye={DataManager:class{constructor(t){this.options=t,this.sortRows=Zt(this.sortRows,this),this.switchColumn=Zt(this.switchColumn,this),this.removeColumn=Zt(this.removeColumn,this),this.options.filterRows=Zt(this.options.filterRows,this)}init(t,e){t||(t=this.options.data),e&&(this.options.columns=e),this.data=t,this.rowCount=0,this.columns=[],this.rows=[],this.prepareColumns(),this.prepareRows(),this.prepareTreeRows(),this.prepareRowView(),this.prepareNumericColumns()}get currentSort(){return this.columns.find((t=>"none"!==t.sortOrder))||{colIndex:-1,sortOrder:"none"}}prepareColumns(){this.columns=[],this.validateColumns(),this.prepareDefaultColumns(),this.prepareHeader()}prepareDefaultColumns(){if(this.options.checkboxColumn&&!this.hasColumnById("_checkbox")){const t={id:"_checkbox",content:this.getCheckboxHTML(),editable:!1,resizable:!1,sortable:!1,focusable:!1,dropdown:!1,width:32};this.columns.push(t)}if(this.options.serialNoColumn&&!this.hasColumnById("_rowIndex")){let t={id:"_rowIndex",content:"",align:"center",editable:!1,resizable:!1,focusable:!1,dropdown:!1};this.columns.push(t)}}prepareHeader(){let t=this.columns.concat(this.options.columns);const e={isHeader:1,editable:!0,sortable:!0,resizable:!0,focusable:!0,dropdown:!0,width:null,format:t=>null==t?"":t+""};this.columns=t.map(((t,e)=>this.prepareCell(t,e))).map((t=>Object.assign({},e,t))).map((t=>(t.content=t.content||t.name||"",t.id=t.id||t.content,t)))}prepareCell(t,e){const n={content:"",sortOrder:"none",colIndex:e,column:this.columns[e]};return null!==t&&"object"==typeof t?Object.assign(n,t):n.content=t,n}prepareNumericColumns(){const t=this.getRow(0);t&&(this.columns=this.columns.map(((e,n)=>{const i=t[n].content;return e.align||isNaN(i)||(e.align="right"),e})))}prepareRows(){this.validateData(this.data),this.rows=this.data.map(((t,e)=>{const n=this._getNextRowCount();let i=[],o={rowIndex:n};if(Array.isArray(t))for(this.options.checkboxColumn&&i.push(this.getCheckboxHTML()),this.options.serialNoColumn&&i.push(n+1+""),i=i.concat(t);i.length<this.columns.length;)i.push("");else{for(let e of this.columns)"_checkbox"===e.id?i.push(this.getCheckboxHTML()):"_rowIndex"===e.id?i.push(n+1+""):i.push(t[e.id]);o.indent=t.indent||0}return this.prepareRow(i,o)}))}prepareTreeRows(){this.rows.forEach(((t,e)=>{if(Yt(t.meta.indent)){const n=this.getRow(e+1);t.meta.isLeaf=!n||!function(t){return void 0!==t||null!==t}(n.meta.indent)||n.meta.indent<=t.meta.indent,t.meta.isTreeNodeClose=!1}}))}prepareRowView(){this.rowViewOrder=this.rows.map((t=>t.meta.rowIndex))}prepareRow(t,e){const n={rowIndex:e.rowIndex,indent:e.indent};return(t=t.map(((t,e)=>this.prepareCell(t,e))).map((t=>Object.assign({},n,t)))).meta=e,t}validateColumns(){const t=this.options.columns;if(!Array.isArray(t))throw new ee("`columns` must be an array");t.forEach(((t,e)=>{if("string"!=typeof t&&"object"!=typeof t)throw new ee(`column "${e}" must be a string or an object`)}))}validateData(t){if(Array.isArray(t)&&(0===t.length||Array.isArray(t[0])||"object"==typeof t[0]))return!0;throw new ee("`data` must be an array of arrays or objects")}appendRows(t){this.validateData(t),this.rows.push(...this.prepareRows(t))}sortRows(t,e="none"){t=+t,this.getColumns().map((n=>{n.colIndex===t?n.sortOrder=e:n.sortOrder="none"})),this._sortRows(t,e)}_sortRows(t,e){if(this.currentSort.colIndex===t&&("asc"===this.currentSort.sortOrder&&"desc"===e||"desc"===this.currentSort.sortOrder&&"asc"===e))return this.reverseArray(this.rowViewOrder),void(this.currentSort.sortOrder=e);if(this.rowViewOrder.sort(((n,i)=>{const o=n,s=i;let r=this.getCell(t,n).content,l=this.getCell(t,i).content;if(r=null==r?"":r,l=null==l?"":l,"none"===e)return o-s;if("asc"===e){if(r<l)return-1;if(r>l)return 1;if(r===l)return 0}else if("desc"===e){if(r<l)return 1;if(r>l)return-1;if(r===l)return 0}return 0})),this.hasColumnById("_rowIndex")){const t=this.getColumnIndexById("_rowIndex");this.rows.forEach(((e,n)=>{const i=this.rowViewOrder.indexOf(n);e[t].content=i+1+""}))}}reverseArray(t){let e=null,n=null;for(e=0,n=t.length-1;e<n;e+=1,n-=1){const i=t[e];t[e]=t[n],t[n]=i}}switchColumn(t,e){const n=this.columns[t];this.columns[t]=this.columns[e],this.columns[e]=n,this.columns[t].colIndex=t,this.columns[e].colIndex=e,this.rows.forEach((n=>{const i=Object.assign({},n[t],{colIndex:e}),o=Object.assign({},n[e],{colIndex:t});n[e]=i,n[t]=o}))}removeColumn(t){t=+t;this.columns=this.columns.filter((e=>e.colIndex!==t)).map(((t,e)=>Object.assign({},t,{colIndex:e}))),this.rows.forEach((e=>{e.splice(t,1),e.forEach(((t,e)=>{t.colIndex=e}))}))}updateRow(t,e){if(t.length<this.columns.length){if(this.hasColumnById("_rowIndex")){t=[e+1+""].concat(t)}if(this.hasColumnById("_checkbox")){t=['<input type="checkbox" />'].concat(t)}}const n=this.prepareRow(t,{rowIndex:e}),i=this.rows.findIndex((t=>t[0].rowIndex===e));return this.rows[i]=n,n}updateCell(t,e,n){let i;"object"==typeof t&&(i=t,t=i.colIndex,e=i.rowIndex,n=i),i=this.getCell(t,e);for(let t in n){const e=n[t];void 0!==e&&(i[t]=e)}return i}updateColumn(t,e){const n=this.getColumn(t);for(let t in e){const i=e[t];void 0!==i&&(n[t]=i)}return n}filterRows(t){return this.options.filterRows(this.rows,t).then((t=>(t||(t=this.getAllRowIndices()),t.then||(t=Promise.resolve(t)),t.then((t=>{this._filteredRows=t;return{rowsToHide:this.getAllRowIndices().filter((e=>!t.includes(e))),rowsToShow:t}})))))}getFilteredRowIndices(){return this._filteredRows||this.getAllRowIndices()}getAllRowIndices(){return this.rows.map((t=>t.meta.rowIndex))}getRowCount(){return this.rowCount}_getNextRowCount(){const t=this.rowCount;return this.rowCount++,t}getRows(t,e){return this.rows.slice(t,e)}getRowsForView(t,e){return this.rowViewOrder.map((t=>this.rows[t])).slice(t,e)}getColumns(t){let e=this.columns;return t&&(e=e.slice(this.getStandardColumnCount())),e}getStandardColumnCount(){return this.options.checkboxColumn&&this.options.serialNoColumn?2:this.options.checkboxColumn||this.options.serialNoColumn?1:0}getColumnCount(t){let e=this.columns.length;return t&&(e-=this.getStandardColumnCount()),e}getColumn(t){return(t=+t)<0&&(t=this.columns.length+t),this.columns.find((e=>e.colIndex===t))}getColumnById(t){return this.columns.find((e=>e.id===t))}getRow(t){return t=+t,this.rows[t]}getCell(t,e){return e=+e,t=+t,this.getRow(e)[t]}getChildren(t){t=+t;const e=this.getRow(t).meta.indent,n=[];for(let i=t+1;i<this.rowCount;i++){const t=this.getRow(i);if(!isNaN(t.meta.indent)&&(t.meta.indent>e&&n.push(i),t.meta.indent===e))break}return n}getImmediateChildren(t){t=+t;const e=this.getRow(t).meta.indent,n=[],i=e+1;for(let o=t+1;o<this.rowCount;o++){const t=this.getRow(o);if(!(isNaN(t.meta.indent)||t.meta.indent>i)&&(t.meta.indent===i&&n.push(o),t.meta.indent===e))break}return n}get(){return{columns:this.columns,rows:this.rows}}getData(t){return this.data[t]}hasColumn(t){return Boolean(this.columns.find((e=>e.content===t)))}hasColumnById(t){return Boolean(this.columns.find((e=>e.id===t)))}getColumnIndex(t){return this.columns.findIndex((e=>e.content===t))}getColumnIndexById(t){return this.columns.findIndex((e=>e.id===t))}getCheckboxHTML(){return'<input type="checkbox" />'}},CellManager:oe,ColumnManager:class{constructor(t){this.instance=t,Gt(this,this.instance,["options","fireEvent","header","datamanager","cellmanager","style","wrapper","rowmanager","bodyScrollable","bodyRenderer"]),this.bindEvents()}renderHeader(){this.header.innerHTML="<div></div>",this.refreshHeader()}refreshHeader(){const t=this.datamanager.getColumns();e("div",this.header).innerHTML=this.getHeaderHTML(t),this.$filterRow=e(".dt-row-filter",this.header),this.$filterRow&&e.style(this.$filterRow,{display:"none"}),this.$columnMap=[],this.bindMoveColumn()}getHeaderHTML(t){let e=this.rowmanager.getRowHTML(t,{isHeader:1});return this.options.inlineFilters&&(e+=this.rowmanager.getRowHTML(t,{isFilter:1})),e}bindEvents(){this.bindDropdown(),this.bindResizeColumn(),this.bindPerfectColumnWidth(),this.bindFilter()}bindDropdown(){let t=".dt-dropdown__toggle",n=".dt-dropdown__list";this.instance.dropdownContainer.innerHTML=this.getDropdownListHTML(),this.$dropdownList=this.instance.dropdownContainer.firstElementChild,e.on(this.header,"click",t,(t=>{this.openDropdown(t)}));const i=e=>{const i=[t,t+" *",n,n+" *"].join(",");e.target.matches(i)||s()};e.on(document.body,"click",i),document.addEventListener("scroll",s,!0),this.instance.on("onDestroy",(()=>{e.off(document.body,"click",i),e.off(document,"scroll",s)})),e.on(this.$dropdownList,"click",".dt-dropdown__list-item",((t,n)=>{if(!this._dropdownActiveColIndex)return;const i=this.options.headerDropdown,{index:o}=e.data(n),s=this._dropdownActiveColIndex;let r=i[o].action;r&&r.call(this.instance,this.getColumn(s)),this.hideDropdown()}));const o=this;function s(t){o.hideDropdown()}this.hideDropdown()}openDropdown(t){this._dropdownWidth||(e.style(this.$dropdownList,{display:""}),this._dropdownWidth=e.style(this.$dropdownList,"width")),e.style(this.$dropdownList,{display:"",left:t.clientX-this._dropdownWidth+4+"px",top:t.clientY+4+"px"});const n=e.closest(".dt-cell",t.target),{colIndex:i}=e.data(n);this._dropdownActiveColIndex=i}hideDropdown(){e.style(this.$dropdownList,{display:"none"}),this._dropdownActiveColIndex=null}bindResizeColumn(){let t,n,i,o=!1;e.on(this.header,"mousedown",".dt-cell .dt-cell__resize-handle",((s,r)=>{document.body.classList.add("dt-resize");const l=r.parentNode.parentNode;t=l;const{colIndex:a}=e.data(t),h=this.getColumn(a);h&&!1===h.resizable||(o=!0,n=e.style(e(".dt-cell__content",t),"width"),i=s.pageX)}));const s=n=>{if(document.body.classList.remove("dt-resize"),!t)return;o=!1;const{colIndex:i}=e.data(t);this.setColumnWidth(i),this.style.setBodyStyle(),t=null};e.on(document.body,"mouseup",s),this.instance.on("onDestroy",(()=>{e.off(document.body,"mouseup",s)}));const r=s=>{if(!o)return;let r=s.pageX-i;"rtl"===this.options.direction&&(r*=-1);const l=n+r,{colIndex:a}=e.data(t);this.options.minimumColumnWidth>l||(this.datamanager.updateColumn(a,{width:l}),this.setColumnHeaderWidth(a))};e.on(document.body,"mousemove",r),this.instance.on("onDestroy",(()=>{e.off(document.body,"mousemove",r)}))}bindPerfectColumnWidth(){e.on(this.header,"dblclick",".dt-cell .dt-cell__resize-handle",((t,n)=>{const i=n.parentNode.parentNode,{colIndex:o}=e.data(i);let s=this.bodyRenderer.visibleRows.map((t=>t[o])).reduce(((t,e)=>t.content.length>e.content.length?t:e)),r=this.cellmanager.getCellHTML(s),l=document.createElement("div");l.innerHTML=r;let a=l.querySelector(".dt-cell__content").textContent,{borderLeftWidth:h,borderRightWidth:d,paddingLeft:c,paddingRight:u}=e.getStyle(this.bodyScrollable.querySelector(".dt-cell__content")),g=[h,d,c,u].map(parseFloat).reduce(((t,e)=>t+e)),m=e.measureTextWidth(a)+g;this.datamanager.updateColumn(o,{width:m}),this.setColumnHeaderWidth(o),this.setColumnWidth(o)}))}bindMoveColumn(){if(this.options.disableReorderColumn)return;const n=e(".dt-row",this.header);this.sortable=t.create(n,{onEnd:t=>{const{oldIndex:n,newIndex:i}=t,o=t.item,{colIndex:s}=e.data(o);+s!==i&&this.switchColumn(n,i)},preventOnFilter:!1,filter:".dt-cell__resize-handle, .dt-dropdown",chosenClass:"dt-cell--dragging",animation:150})}sortColumn(t,e){this.instance.freeze(),this.sortRows(t,e).then((()=>(this.refreshHeader(),this.rowmanager.refreshRows()))).then((()=>this.instance.unfreeze())).then((()=>{this.fireEvent("onSortColumn",this.getColumn(t))}))}removeColumn(t){const e=this.getColumn(t);this.instance.freeze(),this.datamanager.removeColumn(t).then((()=>(this.refreshHeader(),this.rowmanager.refreshRows()))).then((()=>this.instance.unfreeze())).then((()=>{this.fireEvent("onRemoveColumn",e)}))}switchColumn(t,e){this.instance.freeze(),this.datamanager.switchColumn(t,e).then((()=>(this.refreshHeader(),this.rowmanager.refreshRows()))).then((()=>{this.setColumnWidth(t),this.setColumnWidth(e),this.instance.unfreeze()})).then((()=>{this.fireEvent("onSwitchColumn",this.getColumn(t),this.getColumn(e))}))}toggleFilter(t){if(!this.options.inlineFilters)return;let n;n=void 0===t?!this.isFilterShown:t,n?e.style(this.$filterRow,{display:""}):e.style(this.$filterRow,{display:"none"}),this.isFilterShown=n,this.style.setBodyStyle()}focusFilter(t){if(!this.isFilterShown)return;e(`.dt-cell--col-${t} .dt-filter`,this.$filterRow).focus()}bindFilter(){if(!this.options.inlineFilters)return;e.on(this.header,"keydown",".dt-filter",Xt((t=>{this.applyFilter(this.getAppliedFilters())}),300))}applyFilter(t){this.datamanager.filterRows(t).then((({rowsToShow:t})=>{this.rowmanager.showRows(t)}))}getAppliedFilters(){const t={};return e.each(".dt-filter",this.header).map((e=>{const n=e.value;n&&(t[e.dataset.colIndex]=n)})),t}applyDefaultSortOrder(){const t=this.getColumns().filter((t=>"none"!==t.sortOrder));if(1===t.length){const e=t[0];this.sortColumn(e.colIndex,e.sortOrder)}}sortRows(t,e){return this.datamanager.sortRows(t,e)}getColumn(t){return this.datamanager.getColumn(t)}getColumns(){return this.datamanager.getColumns()}setColumnWidth(t,e){t=+t;let n=e||this.getColumn(t).width;const i=[`.dt-cell__content--col-${t}`,`.dt-cell__edit--col-${t}`].join(", "),o={width:n+"px"};this.style.setStyle(i,o)}setColumnHeaderWidth(t){t=+t,this.$columnMap=this.$columnMap||[];const e=`.dt-cell__content--header-${t}`,{width:n}=this.getColumn(t);let i=this.$columnMap[t];i||(i=this.header.querySelector(e),this.$columnMap[t]=i),i.style.width=n+"px"}getColumnMinWidth(t){return t=+t,this.getColumn(t).minWidth||24}getFirstColumnIndex(){return this.datamanager.getColumnIndexById("_rowIndex")+1}getHeaderCell$(t){return e(`.dt-cell--header-${t}`,this.header)}getLastColumnIndex(){return this.datamanager.getColumnCount()-1}getDropdownHTML(){const{dropdownButton:t}=this.options;return`\n            <div class="dt-dropdown">\n                <div class="dt-dropdown__toggle">${t}</div>\n            </div>\n      `}getDropdownListHTML(){const{headerDropdown:t}=this.options;return`\n            <div class="dt-dropdown__list">\n            ${t.map(((t,e)=>`\n                <div class="dt-dropdown__list-item" data-index="${e}">${t.label}</div>\n            `)).join("")}\n            </div>\n        `}},RowManager:class{constructor(t){this.instance=t,Gt(this,this.instance,["options","fireEvent","wrapper","bodyScrollable","bodyRenderer","style"]),this.bindEvents(),this.refreshRows=Zt(this.refreshRows,this)}get datamanager(){return this.instance.datamanager}get cellmanager(){return this.instance.cellmanager}bindEvents(){this.bindCheckbox()}bindCheckbox(){this.options.checkboxColumn&&(this.checkMap=[],e.on(this.wrapper,"click",'.dt-cell--col-0 [type="checkbox"]',((t,n)=>{const i=n.closest(".dt-cell"),{rowIndex:o,isHeader:s}=e.data(i),r=n.checked;s?this.checkAll(r):this.checkRow(o,r)})))}refreshRows(){this.instance.renderBody(),this.instance.setDimensions()}refreshRow(t,e){this.datamanager.updateRow(t,e).forEach((t=>{this.cellmanager.refreshCell(t,!0)}))}getCheckedRows(){if(!this.checkMap)return[];let t=[];for(let e in this.checkMap){1===this.checkMap[e]&&t.push(e)}return t}highlightCheckedRows(){this.getCheckedRows().map((t=>this.checkRow(t,!0)))}checkRow(t,n){const i=n?1:0;this.checkMap[t]=i,e.each((t=>`.dt-cell--0-${t} [type="checkbox"]`)(t),this.bodyScrollable).map((t=>{t.checked=n})),this.highlightRow(t,n),this.showCheckStatus(),this.fireEvent("onCheckRow",this.datamanager.getRow(t))}checkAll(t){const n=t?1:0;t?this.datamanager._filteredRows?this.datamanager._filteredRows.forEach((e=>{this.checkRow(e,t)})):this.checkMap=Array.from(Array(this.getTotalRows())).map((t=>n)):this.checkMap=[],e.each('.dt-cell--col-0 [type="checkbox"]',this.bodyScrollable).map((e=>{e.checked=t})),this.highlightAll(t),this.showCheckStatus(),this.fireEvent("onCheckRow")}showCheckStatus(){if(!this.options.checkedRowStatus)return;const t=this.getCheckedRows().length;if(t>0){let e=this.instance.translate("{count} rows selected",{count:t});this.bodyRenderer.showToastMessage(e)}else this.bodyRenderer.clearToastMessage()}highlightRow(t,e=!0){const n=this.getRow$(t);n&&(e||!this.bodyScrollable.classList.contains("dt-scrollable--highlight-all")?(e&&n.classList.contains("dt-row--unhighlight")&&n.classList.remove("dt-row--unhighlight"),this._highlightedRows=this._highlightedRows||{},e?(n.classList.add("dt-row--highlight"),this._highlightedRows[t]=n):(n.classList.remove("dt-row--highlight"),delete this._highlightedRows[t])):n.classList.add("dt-row--unhighlight"))}highlightAll(t=!0){if(t)this.bodyScrollable.classList.add("dt-scrollable--highlight-all");else{this.bodyScrollable.classList.remove("dt-scrollable--highlight-all");for(const t in this._highlightedRows){this._highlightedRows[t].classList.remove("dt-row--highlight")}this._highlightedRows={}}}showRows(t){var e;e=t;const n=(t=Array.isArray(e)?e:[e]).map((t=>this.datamanager.getRow(t)));this.bodyRenderer.renderRows(n)}showAllRows(){const t=this.datamanager.getAllRowIndices();this.showRows(t)}getChildrenToShowForNode(t){return this.datamanager.getRow(t).meta.isTreeNodeClose=!1,this.datamanager.getImmediateChildren(t)}openSingleNode(t){const e=Jt([...this.getChildrenToShowForNode(t),...this.bodyRenderer.visibleRowIndices]).sort(Qt);this.showRows(e)}getChildrenToHideForNode(t){this.datamanager.getRow(t).meta.isTreeNodeClose=!0;const e=this.datamanager.getChildren(t);return e.forEach((t=>{const e=this.datamanager.getRow(t);e.meta.isLeaf||(e.meta.isTreeNodeClose=!0)})),e}closeSingleNode(t){const e=this.getChildrenToHideForNode(t),n=this.bodyRenderer.visibleRowIndices.filter((t=>!e.includes(t))).sort(Qt);this.showRows(n)}expandAllNodes(){const t=Jt([...this.datamanager.getRows().filter((t=>!t.meta.isLeaf)).map((t=>this.getChildrenToShowForNode(t.meta.rowIndex))).flat(),...this.bodyRenderer.visibleRowIndices]).sort(Qt);this.showRows(t)}collapseAllNodes(){const t=this.datamanager.getRows().filter((t=>0===t.meta.indent)).map((t=>this.getChildrenToHideForNode(t.meta.rowIndex))).flat(),e=this.bodyRenderer.visibleRowIndices.filter((e=>!t.includes(e))).sort(Qt);this.showRows(e)}setTreeDepth(t){let e=this.datamanager.getRows();const n=e.filter((e=>e.meta.indent<t)),i=e.filter((e=>e.meta.indent>=t)),o=i.filter((e=>e.meta.indent>t));i.forEach((t=>{t.meta.isLeaf||(t.meta.isTreeNodeClose=!0)})),n.forEach((t=>{t.meta.isLeaf||(t.meta.isTreeNodeClose=!1)}));const s=e.filter((t=>!o.includes(t))).map((t=>t.meta.rowIndex)).sort(Qt);this.showRows(s)}getRow$(t){return e(this.selector(t),this.bodyScrollable)}getTotalRows(){return this.datamanager.getRowCount()}getFirstRowIndex(){return 0}getLastRowIndex(){return this.datamanager.getRowCount()-1}scrollToRow(t){t=+t,this._lastScrollTo=this._lastScrollTo||0;const n=this.getRow$(t);if(e.inViewport(n,this.bodyScrollable))return;const{height:i}=n.getBoundingClientRect(),{top:o,bottom:s}=this.bodyScrollable.getBoundingClientRect(),r=Math.floor((s-o)/i);let l=0;l=t>this._lastScrollTo?i*(t+1-r):i*(t+1-1),this._lastScrollTo=t,e.scrollTop(this.bodyScrollable,l)}getRowHTML(t,e){const n=qt(e);let i=e.rowIndex;return e.isFilter&&(t=t.map((t=>Object.assign({},t,{content:this.getFilterInput({colIndex:t.colIndex,name:t.name}),isFilter:1,isHeader:void 0,editable:!1}))),i="filter"),e.isHeader&&(i="header"),`\n            <div class="dt-row dt-row-${i}" ${n}>\n                ${t.map((t=>this.cellmanager.getCellHTML(t))).join("")}\n            </div>\n        `}getFilterInput(t){let e=`title="Filter based on ${t.name||"Index"}"`;return`<input class="dt-filter dt-input" type="text" ${qt(t)} tabindex="1"\n            ${0===t.colIndex?"disabled":e} />`}selector(t){return`.dt-row-${t}`}},BodyRenderer:class{constructor(t){this.instance=t,this.options=t.options,this.datamanager=t.datamanager,this.rowmanager=t.rowmanager,this.cellmanager=t.cellmanager,this.bodyScrollable=t.bodyScrollable,this.footer=this.instance.footer,this.log=t.log}renderRows(t){if(this.visibleRows=t,this.visibleRowIndices=t.map((t=>t.meta.rowIndex)),0===t.length)return void(this.bodyScrollable.innerHTML=this.getNoDataHTML());const e=this.datamanager.rowViewOrder.map((t=>this.visibleRowIndices.includes(t)?t:null)).filter((t=>null!==t)),n=getComputedStyle(this.bodyScrollable);let i={width:n.width,height:n.height,itemHeight:this.options.cellHeight,total:t.length,generate:t=>{const n=document.createElement("div"),i=e[t],o=this.datamanager.getRow(i),s=this.rowmanager.getRowHTML(o,o.meta);return n.innerHTML=s,n.children[0]},afterRender:()=>{this.restoreState()}};this.hyperlist?this.hyperlist.refresh(this.bodyScrollable,i):this.hyperlist=new he(this.bodyScrollable,i),this.renderFooter()}render(){const t=this.datamanager.getRowsForView();this.renderRows(t),this.instance.setDimensions()}renderFooter(){if(!this.options.showTotalRow)return;const t=this.getTotalRow();let e=this.rowmanager.getRowHTML(t,{isTotalRow:1,rowIndex:"totalRow"});this.footer.innerHTML=e}getTotalRow(){return this.datamanager.getColumns().map((t=>{let e=null;return["_rowIndex","_checkbox"].includes(t.id)&&(e=""),{content:e,isTotalRow:1,colIndex:t.colIndex,column:t}})).map(((t,e)=>{if(""===t.content)return t;if(this.options.hooks.columnTotal){const n=this.visibleRows.map((t=>t[e].content)),i=this.options.hooks.columnTotal.call(this.instance,n,t);if(null!=i)return t.content=i,t}return t.content=this.visibleRows.reduce(((t,n)=>{const i=n[e];return"number"==typeof i.content?(null==t&&(t=0),t+i.content):t}),t.content),t}))}restoreState(){this.rowmanager.highlightCheckedRows(),this.cellmanager.selectAreaOnClusterChanged(),this.cellmanager.focusCellOnClusterChanged()}showToastMessage(t,e){this.instance.toastMessage.innerHTML=this.getToastMessageHTML(t),e&&setTimeout((()=>{this.clearToastMessage()}),1e3*e)}clearToastMessage(){this.instance.toastMessage.innerHTML=""}getNoDataHTML(){return`<div class="dt-scrollable__no-data">${this.options.noDataMessage}</div>`}getToastMessageHTML(t){return`<span class="dt-toast__message">${t}</span>`}},Style:class{constructor(t){this.instance=t,Gt(this,this.instance,["options","datamanager","columnmanager","header","footer","bodyScrollable","datatableWrapper","getColumn","bodyRenderer"]),this.scopeClass="dt-instance-"+t.constructor.instances,t.datatableWrapper.classList.add(this.scopeClass);const e=document.createElement("style");t.wrapper.insertBefore(e,t.datatableWrapper),this.styleEl=e,this.bindResizeWindow(),this.bindScrollHeader()}get stylesheet(){return this.styleEl.sheet}bindResizeWindow(){this.onWindowResize=this.onWindowResize.bind(this),this.onWindowResize=Ut(this.onWindowResize,300),"fluid"===this.options.layout&&e.on(window,"resize",this.onWindowResize)}bindScrollHeader(){this._settingHeaderPosition=!1,e.on(this.bodyScrollable,"scroll",(t=>{this._settingHeaderPosition||(this._settingHeaderPosition=!0,requestAnimationFrame((()=>{const n=-t.target.scrollLeft;e.style(this.header,{transform:`translateX(${n}px)`}),e.style(this.footer,{transform:`translateX(${n}px)`}),this._settingHeaderPosition=!1})))}))}onWindowResize(){this.distributeRemainingWidth(),this.refreshColumnWidth(),this.setBodyStyle()}destroy(){this.styleEl.remove(),e.off(window,"resize",this.onWindowResize)}setStyle(t,e){if(t.includes(","))return void t.split(",").map((t=>t.trim())).forEach((t=>{this.setStyle(t,e)}));if(!(t=t.trim()))return;this._styleRulesMap=this._styleRulesMap||{};const n=this._getPrefixedSelector(t);this._styleRulesMap[n]&&(this.removeStyle(t),e=Object.assign({},this._styleRulesMap[n],e));const i=`${n} { ${this._getRuleString(e)} }`;this._styleRulesMap[n]=e,this.stylesheet.insertRule(i)}removeStyle(t){if(t.includes(","))return void t.split(",").map((t=>t.trim())).forEach((t=>{this.removeStyle(t)}));if(!(t=t.trim()))return;const e=this._getPrefixedSelector(t),n=Array.from(this.stylesheet.cssRules).findIndex((t=>t.selectorText===e));-1!==n&&this.stylesheet.deleteRule(n)}_getPrefixedSelector(t){return`.${this.scopeClass} ${t}`}_getRuleString(t){return Object.keys(t).map((e=>{let n=e;return e.includes("-")||(n=Vt(e)),`${n}:${t[e]};`})).join("")}setDimensions(){this.setCellHeight(),this.setupMinWidth(),this.setupNaturalColumnWidth(),this.setupColumnWidth(),this.distributeRemainingWidth(),this.setColumnStyle(),this.setBodyStyle()}setCellHeight(){this.setStyle(".dt-cell",{height:this.options.cellHeight+"px"})}setupMinWidth(){e.each(".dt-cell--header",this.header).map((t=>{const{colIndex:n}=e.data(t),i=this.getColumn(n);if(!i.minWidth){const n=e.style(e(".dt-cell__content",t),"width");i.minWidth=n}}))}setupNaturalColumnWidth(){e(".dt-row")&&(e.each(".dt-row-header .dt-cell",this.header).map((t=>{const{colIndex:n}=e.data(t),i=this.datamanager.getColumn(n);let o=e.style(e(".dt-cell__content",t),"width");"number"==typeof o&&o>=this.options.minimumColumnWidth?i.naturalWidth=o:i.naturalWidth=this.options.minimumColumnWidth})),e.each(".dt-row-0 .dt-cell",this.bodyScrollable).map((t=>{const{colIndex:n}=e.data(t),i=this.datamanager.getColumn(n);let o=e.style(e(".dt-cell__content",t),"width");"number"==typeof o&&o>=i.naturalWidth?i.naturalWidth=o:i.naturalWidth=i.naturalWidth})))}setupColumnWidth(){if("ratio"===this.options.layout){let t=e.style(this.datatableWrapper,"width");if(this.options.serialNoColumn){t=t-this.datamanager.getColumnById("_rowIndex").width-1}if(this.options.checkboxColumn){t=t-this.datamanager.getColumnById("_checkbox").width-1}const n=t/this.datamanager.getColumns().map((t=>"_rowIndex"===t.id||"_checkbox"===t.id?0:(t.width||(t.width=1),t.ratioWidth=parseInt(t.width,10),t.ratioWidth))).reduce(((t,e)=>t+e));this.datamanager.getColumns().map((t=>{"_rowIndex"!==t.id&&"_checkbox"!==t.id&&(t.width=Math.floor(n*t.ratioWidth)-1)}))}else this.datamanager.getColumns().map((t=>{t.width||(t.width=t.naturalWidth),"_rowIndex"===t.id&&(t.width=this.getRowIndexColumnWidth()),t.width<this.options.minimumColumnWidth&&(t.width=this.options.minimumColumnWidth)}))}distributeRemainingWidth(){if("fluid"!==this.options.layout)return;const t=e.style(this.instance.datatableWrapper,"width");let n=e(".dt-row",this.bodyScrollable),i=t;if(n)i=e.style(n,"width");else{let t=e(".dt-row",this.instance.header);i=Array.from(t.children).map((t=>t.offsetWidth)).reduce(((t,e)=>t+e),0)}const o=this.datamanager.getColumns().filter((t=>t.resizable)),s=(t-i)/o.length;o.map((t=>{const n=e.style(this.getColumnHeaderElement(t.colIndex),"width");let i=Math.floor(n+s)-2;this.datamanager.updateColumn(t.colIndex,{width:i})}))}setColumnStyle(){this.datamanager.getColumns().map((t=>{t.align||(t.align="left"),["left","center","right"].includes(t.align)||(t.align="left"),this.setStyle(`.dt-cell--col-${t.colIndex}`,{"text-align":t.align}),this.columnmanager.setColumnHeaderWidth(t.colIndex),this.columnmanager.setColumnWidth(t.colIndex)}))}refreshColumnWidth(){this.datamanager.getColumns().map((t=>{this.columnmanager.setColumnHeaderWidth(t.colIndex),this.columnmanager.setColumnWidth(t.colIndex)}))}setBodyStyle(){const t=e.style(this.datatableWrapper,"width"),n=e(".dt-row",this.bodyScrollable);if(!n)return;const i=e.style(n,"width");let o=t>i?i:t;e.style(this.bodyScrollable,{width:o+"px"}),e.removeStyle(this.bodyScrollable,"height");let s=e.getStyle(this.bodyScrollable,"height");const r=(this.bodyRenderer.hyperlist||{})._scrollHeight||1/0,l=e.hasHorizontalOverflow(this.bodyScrollable);let a;r<s&&(a=r,l&&(a+=e.scrollbarSize()),e.style(this.bodyScrollable,{height:a+"px"}));this.bodyScrollable.scrollHeight-this.bodyScrollable.offsetHeight<e.scrollbarSize()&&e.style(this.bodyScrollable,{overflowY:"hidden"}),"fluid"===this.options.layout&&e.style(this.bodyScrollable,{overflowX:"hidden"})}getColumnHeaderElement(t){return(t=+t)<0?null:e(`.dt-cell--col-${t}`,this.header)}getRowIndexColumnWidth(){const t=this.datamanager.getRowCount();return e.measureTextWidth(t+"")+22}},Keyboard:class{constructor(t){this.listeners={},e.on(t,"keydown",this.handler.bind(this))}handler(t){let e=de[t.keyCode];t.shiftKey&&"shift"!==e&&(e="shift+"+e),(t.ctrlKey&&"ctrl"!==e||t.metaKey&&"meta"!==e)&&(e="ctrl+"+e);const n=this.listeners[e];if(n&&n.length>0)for(let e of n){const n=e(t);void 0!==n&&!0!==n||t.preventDefault()}}on(t,e){t.split(",").map((t=>t.trim())).map((t=>{this.listeners[t]=this.listeners[t]||[],this.listeners[t].push(e)}))}}};class ve{constructor(t,e){if(ve.instances++,"string"==typeof t&&(t=document.querySelector(t)),this.wrapper=t,!(this.wrapper instanceof HTMLElement))throw new Error("Invalid argument given for `wrapper`");this.initializeTranslations(e),this.setDefaultOptions(),this.buildOptions(e),this.prepare(),this.initializeComponents(),this.options.data&&(this.refresh(),this.columnmanager.applyDefaultSortOrder())}initializeTranslations(t){this.language=t.language||"en",this.translationManager=new pe(this.language),t.translations&&this.translationManager.addTranslations(t.translations)}setDefaultOptions(){var t;this.DEFAULT_OPTIONS={columns:[],data:[],dropdownButton:ne,headerDropdown:[{label:(t=this).translate("Sort Ascending"),action:function(t){this.sortColumn(t.colIndex,"asc")}},{label:t.translate("Sort Descending"),action:function(t){this.sortColumn(t.colIndex,"desc")}},{label:t.translate("Reset sorting"),action:function(t){this.sortColumn(t.colIndex,"none")}},{label:t.translate("Remove column"),action:function(t){this.removeColumn(t.colIndex)}}],events:{onRemoveColumn(t){},onSwitchColumn(t,e){},onSortColumn(t){},onCheckRow(t){},onDestroy(){}},hooks:{columnTotal:null},sortIndicator:{asc:"↑",desc:"↓",none:""},overrideComponents:{},filterRows:fe,freezeMessage:"",getEditor:null,serialNoColumn:!0,checkboxColumn:!1,clusterize:!0,logs:!1,layout:"fixed",noDataMessage:t.translate("No Data"),cellHeight:40,minimumColumnWidth:30,inlineFilters:!1,treeView:!1,checkedRowStatus:!0,dynamicRowHeight:!1,pasteFromClipboard:!1,showTotalRow:!1,direction:"ltr",disableReorderColumn:!1}}buildOptions(t){this.options=this.options||{},this.options=Object.assign({},this.DEFAULT_OPTIONS,this.options||{},t),t.headerDropdown=t.headerDropdown||[],this.options.headerDropdown=[...this.DEFAULT_OPTIONS.headerDropdown,...t.headerDropdown],this.events=Object.assign({},this.DEFAULT_OPTIONS.events,this.options.events||{},t.events||{}),this.fireEvent=this.fireEvent.bind(this)}prepare(){this.prepareDom(),this.unfreeze()}initializeComponents(){let t=Object.assign({},ye,this.options.overrideComponents),{Style:e,Keyboard:n,DataManager:i,RowManager:o,ColumnManager:s,CellManager:r,BodyRenderer:l}=t;this.style=new e(this),this.keyboard=new n(this.wrapper),this.datamanager=new i(this.options),this.rowmanager=new o(this),this.columnmanager=new s(this),this.cellmanager=new r(this),this.bodyRenderer=new l(this)}prepareDom(){this.wrapper.innerHTML=`\n            <div class="datatable" dir="${this.options.direction}">\n                <div class="dt-header"></div>\n                <div class="dt-scrollable"></div>\n                <div class="dt-footer"></div>\n                <div class="dt-freeze">\n                    <span class="dt-freeze__message">\n                        ${this.options.freezeMessage}\n                    </span>\n                </div>\n                <div class="dt-toast"></div>\n                <div class="dt-dropdown-container"></div>\n                <textarea class="dt-paste-target"></textarea>\n            </div>\n        `,this.datatableWrapper=e(".datatable",this.wrapper),this.header=e(".dt-header",this.wrapper),this.footer=e(".dt-footer",this.wrapper),this.bodyScrollable=e(".dt-scrollable",this.wrapper),this.freezeContainer=e(".dt-freeze",this.wrapper),this.toastMessage=e(".dt-toast",this.wrapper),this.pasteTarget=e(".dt-paste-target",this.wrapper),this.dropdownContainer=e(".dt-dropdown-container",this.wrapper)}refresh(t,e){this.datamanager.init(t,e),this.render(),this.setDimensions()}destroy(){this.wrapper.innerHTML="",this.style.destroy(),this.fireEvent("onDestroy")}appendRows(t){this.datamanager.appendRows(t),this.rowmanager.refreshRows()}refreshRow(t,e){this.rowmanager.refreshRow(t,e)}render(){this.renderHeader(),this.renderBody()}renderHeader(){this.columnmanager.renderHeader()}renderBody(){this.bodyRenderer.render()}setDimensions(){this.style.setDimensions()}showToastMessage(t,e){this.bodyRenderer.showToastMessage(t,e)}clearToastMessage(){this.bodyRenderer.clearToastMessage()}getColumn(t){return this.datamanager.getColumn(t)}getColumns(){return this.datamanager.getColumns()}getRows(){return this.datamanager.getRows()}getCell(t,e){return this.datamanager.getCell(t,e)}getColumnHeaderElement(t){return this.columnmanager.getColumnHeaderElement(t)}getViewportHeight(){return this.viewportHeight||(this.viewportHeight=e.style(this.bodyScrollable,"height")),this.viewportHeight}sortColumn(t,e){this.columnmanager.sortColumn(t,e)}removeColumn(t){this.columnmanager.removeColumn(t)}scrollToLastColumn(){this.datatableWrapper.scrollLeft=9999}freeze(){e.style(this.freezeContainer,{display:""})}unfreeze(){e.style(this.freezeContainer,{display:"none"})}updateOptions(t){this.buildOptions(t)}fireEvent(t,...e){const n=[...this._internalEventHandlers[t]||[],this.events[t]].filter(Boolean);for(let t of n)t.apply(this,e)}on(t,e){this._internalEventHandlers=this._internalEventHandlers||{},this._internalEventHandlers[t]=this._internalEventHandlers[t]||[],this._internalEventHandlers[t].push(e)}log(){this.options.logs&&console.log.apply(console,arguments)}translate(t,e){return this.translationManager.translate(t,e)}}ve.instances=0;var be="0.0.0-development";return ve.__version__=be,ve}(Sortable);